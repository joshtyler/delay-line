Version 4
SHEET 1 5828 2084
WIRE 3376 -512 3296 -512
WIRE 3456 -512 3376 -512
WIRE 2096 -400 1920 -400
WIRE 2240 -400 2160 -400
WIRE 2320 -400 2240 -400
WIRE 3136 -400 2320 -400
WIRE 2320 -320 2320 -400
WIRE 3376 -288 3376 -512
WIRE 3136 -272 3136 -400
WIRE 3136 -176 3136 -192
WIRE 3376 -176 3376 -224
WIRE 3376 -176 3136 -176
WIRE 3520 -176 3376 -176
WIRE 4224 -176 3584 -176
WIRE 4368 -176 4224 -176
WIRE 3136 -160 3136 -176
WIRE 3520 -160 3440 -160
WIRE 3376 -112 3376 -176
WIRE 144 -96 -32 -96
WIRE 320 -96 144 -96
WIRE 1072 -96 320 -96
WIRE 1920 -96 1920 -400
WIRE 1920 -96 1152 -96
WIRE 4224 -96 4224 -176
WIRE 80 -64 -32 -64
WIRE 1152 -64 624 -64
WIRE 1872 -64 1232 -64
WIRE 2016 -64 1872 -64
WIRE 624 -32 624 -64
WIRE 624 -32 -32 -32
WIRE 2016 64 2016 -64
WIRE 2160 64 2016 64
WIRE 2320 64 2320 -240
WIRE 2320 64 2160 64
WIRE 3136 64 3136 -80
WIRE 3136 64 2320 64
WIRE 3376 64 3376 -48
WIRE 3376 64 3136 64
WIRE 3440 64 3440 -160
WIRE 3440 64 3376 64
WIRE 4224 64 4224 -16
WIRE 4224 64 3440 64
WIRE 4368 64 4224 64
WIRE 128 128 -144 128
WIRE 320 128 320 -96
WIRE 320 128 208 128
WIRE -64 160 -144 160
WIRE 624 240 624 -32
WIRE 624 240 592 240
WIRE 3600 592 3440 592
WIRE 3984 592 3904 592
WIRE 4160 592 3984 592
WIRE 4432 592 4160 592
WIRE 4720 592 4432 592
WIRE 5328 592 4800 592
WIRE 5360 592 5328 592
WIRE 3984 608 3984 592
WIRE 1920 624 1920 -96
WIRE 2176 624 1920 624
WIRE 2304 624 2240 624
WIRE 2464 624 2384 624
WIRE 2576 624 2544 624
WIRE 2656 624 2576 624
WIRE 2928 624 2656 624
WIRE 3248 624 2928 624
WIRE 3344 624 3248 624
WIRE 3440 624 3440 592
WIRE 3440 624 3344 624
WIRE 5328 624 5328 592
WIRE 2576 640 2576 624
WIRE 4160 640 4160 592
WIRE 4432 656 4432 592
WIRE 3440 688 3440 624
WIRE 3600 688 3440 688
WIRE 3984 688 3984 672
WIRE 3984 688 3904 688
WIRE 1872 720 1872 -64
WIRE 2576 720 2576 704
WIRE 2576 720 1872 720
WIRE 2656 720 2656 704
WIRE 2656 720 2576 720
WIRE 2800 720 2656 720
WIRE 5328 736 5328 704
WIRE 5328 736 4880 736
WIRE 3248 768 3248 624
WIRE 3344 768 3344 624
WIRE 3440 784 3440 688
WIRE 3600 784 3440 784
WIRE 4160 784 4160 720
WIRE 4160 784 3904 784
WIRE 4208 784 4160 784
WIRE 4352 784 4288 784
WIRE 4432 784 4432 720
WIRE 4432 784 4352 784
WIRE 4544 784 4432 784
WIRE 3440 880 3440 784
WIRE 3600 880 3440 880
WIRE 3984 880 3904 880
WIRE 4160 880 3984 880
WIRE 4432 880 4160 880
WIRE 4720 880 4432 880
WIRE 5328 880 4800 880
WIRE 5360 880 5328 880
WIRE 3984 896 3984 880
WIRE 4432 944 4432 880
WIRE 3344 976 3344 848
WIRE 3600 976 3344 976
WIRE 3984 976 3984 960
WIRE 3984 976 3904 976
WIRE 5328 1008 5328 880
WIRE 576 1024 576 944
WIRE 800 1024 800 944
WIRE 1024 1024 1024 944
WIRE 1360 1024 1360 944
WIRE 3248 1072 3248 848
WIRE 3600 1072 3248 1072
WIRE 4160 1072 4160 880
WIRE 4160 1072 3904 1072
WIRE 4432 1072 4432 1008
WIRE 4496 1072 4432 1072
WIRE 576 1168 576 1104
WIRE 800 1168 800 1104
WIRE 1024 1168 1024 1104
WIRE 1360 1168 1360 1104
WIRE 2800 1216 2800 720
WIRE 3760 1216 3760 1120
WIRE 3760 1216 2800 1216
WIRE 4352 1216 4352 784
WIRE 4352 1216 3760 1216
WIRE 4496 1216 4496 1072
WIRE 4496 1216 4352 1216
WIRE 4880 1216 4880 736
WIRE 4880 1216 4496 1216
WIRE 5328 1216 5328 1088
WIRE 5328 1216 4880 1216
FLAG 592 240 shield_gnd_edsac
FLAG 1024 944 shield_gnd_edsac
FLAG 1024 1168 0
FLAG 2160 64 shield_gnd_delay_line
FLAG 1360 944 shield_gnd_delay_line
FLAG 1360 1168 0
FLAG 144 -96 from_edsac
FLAG 2240 -400 filtered_signal
FLAG 4368 -176 data_to_fpga
FLAG 5360 592 3V3
FLAG 5360 880 1V2
FLAG 2928 624 smoothing_cap
FLAG 80 -64 edsac_0v_isolated
FLAG 800 944 edsac_0v_isolated
FLAG 800 1168 0
FLAG -64 160 heater_ground
FLAG 576 944 heater_ground
FLAG 576 1168 0
FLAG 3296 -512 3V3
SYMBOL cap 2160 -416 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C3
SYMATTR Value 2.2n
SYMBOL res 2304 -336 R0
SYMATTR InstName R2
SYMATTR Value 68
SYMBOL res 1008 1008 R0
SYMATTR InstName R1
SYMATTR Value {GND_R}
SYMBOL res 1344 1008 R0
SYMATTR InstName R9
SYMATTR Value {GND_R}
SYMBOL res 1168 -112 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R7
SYMATTR Value 0.5
SYMBOL res 1248 -80 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R8
SYMATTR Value 0.5
SYMBOL diode 2176 640 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D1
SYMATTR Value 1N4148
SYMBOL cap 2560 640 R0
SYMATTR InstName C1
SYMATTR Value 10m
SYMBOL heater_psu -192 128 R0
SYMATTR InstName X2
SYMBOL res 3120 -176 R0
SYMATTR InstName R6
SYMATTR Value {DIV_BTM}
SYMBOL res 3120 -288 R0
SYMATTR InstName R10
SYMATTR Value {DIV_TOP}
SYMBOL Digital\\schmtbuf 3520 -240 R0
WINDOW 3 -55 109 Left 2
SYMATTR Value Vhigh=3.3 Vt=1.65 Vh=.5 Trise=2.5n Tfall=2.5n
SYMATTR InstName A1
SYMBOL PowerProducts\\LT3030 3760 832 R0
SYMATTR InstName U1
SYMBOL res 3328 752 R0
SYMATTR InstName R4
SYMATTR Value 1Meg
SYMBOL res 3232 752 R0
SYMATTR InstName R12
SYMATTR Value 1Meg
SYMBOL cap 3968 608 R0
SYMATTR InstName C2
SYMATTR Value 0.01µ
SYMBOL res 4144 624 R0
SYMATTR InstName R13
SYMATTR Value 357k
SYMBOL res 4304 768 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R14
SYMATTR Value 210k
SYMBOL res 4816 576 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R16
SYMATTR Value 0.1
SYMBOL cap 4416 656 R0
SYMATTR InstName C4
SYMATTR Value 10µ
SYMBOL cap 3968 896 R0
SYMATTR InstName C5
SYMATTR Value 0.01µ
SYMBOL res 4816 864 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R20
SYMATTR Value 0.1
SYMBOL cap 4416 944 R0
SYMATTR InstName C6
SYMATTR Value 4.7µ
SYMBOL res 2400 608 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R5
SYMATTR Value 10
SYMBOL ind 2560 608 R90
WINDOW 0 5 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName L1
SYMATTR Value 1m
SYMBOL ind 224 112 R90
WINDOW 0 5 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName L2
SYMATTR Value 1m
SYMBOL res 5312 608 R0
SYMATTR InstName R3
SYMATTR Value 220
SYMBOL res 5312 992 R0
SYMATTR InstName R17
SYMATTR Value 80
SYMBOL res 4208 -112 R0
SYMATTR InstName R15
SYMATTR Value 100k
SYMBOL res 2640 608 R0
SYMATTR InstName R18
SYMATTR Value 1k
SYMBOL res 784 1008 R0
SYMATTR InstName R19
SYMATTR Value {GND_R}
SYMBOL res 560 1008 R0
SYMATTR InstName R21
SYMATTR Value {GND_R}
SYMBOL dummy_edsac -80 -80 R0
SYMATTR InstName X1
SYMBOL schottky 3392 -224 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D2
SYMATTR Value BAT54
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL schottky 3392 -48 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D3
SYMATTR Value BAT54
SYMATTR Description Diode
SYMATTR Type diode
TEXT 600 -832 Left 2 !.tran 0 0.1 0
TEXT 1104 -176 Left 2 ;Coax
TEXT 768 624 Left 2 !.param GND_R=0.5
TEXT 752 -216 Left 2 !.model PL1 LTRA(len=1 R=92m L=376n C=67p)
TEXT 608 -904 Left 2 ;This is the top level schematic of store regeneration -> delay line frontend.\nThe delay line front end can either be modeled as using the actual valve level model, or a dummy model which emulates the signal (faster).
TEXT 744 -280 Left 2 ;This is a model for the URM70 Coax which EDSAC uses.\nFor normal usage the coax is not simulated because it is incredibly slow.
TEXT 2120 752 Left 2 ;Supply rectification and filtering.\n \nHalf wave rectification is sufficient due to low power draw,\nand avoids need for transformer.
TEXT 2024 -488 Left 2 ;50Hz filtering and termination
TEXT 3856 448 Left 2 ;FPGA Dev board power supply\n(Prexisting on FPGA dev board).\nN.B. LT3030 is a dual output LDO
TEXT 2808 -248 Left 2 ;Voltage divider
TEXT 2520 -184 Left 2 !.param DIV_TOTAL=4k7\n.PARAM DIV_RATIO = 0.5\n.PARAM DIV_BTM = DIV_TOTAL * DIV_RATIO\n.PARAM DIV_TOP = DIV_TOTAL * (1-DIV_RATIO)
TEXT 3032 -432 Left 2 ;FPGA input Schmitt Trigger
TEXT 5432 656 Left 2 ;Nominal current is 15mA
TEXT 5448 1040 Left 2 ;Nominal current is 15mA
TEXT 3480 1264 Left 2 ;N.B. 100R RESISTORS HAVE BEEN REMOVED FROM EACH CHANNEL OF PSU OUTPUT.\nFPGA dev board should be modified to reflect this.\n(They contribute a very significant amount to the current draw, and are not necessary for stability)
TEXT -240 -432 Left 2 !.ic V(smoothing_cap)=5.76 V(3v3)=3.3 V(1V2)=1.2
TEXT -240 -520 Left 2 ;Set initial value of smoothing_cap to speed up simulation of fpga input.\nComment out directive and delete EDSAC store for detailed simulation of phantom power supply\n(or use dummy edsac store and tolerate slow simulation speed)
TEXT 3288 -352 Left 2 ;A SPICE model is not available for the actual schmitt trigger used\nTherefore use a generic schmitt trigger with similar parameters
TEXT 5248 488 Left 2 ;Resistors to mimic load
TEXT -496 248 Left 2 ;1mH inductor presents high impedance to 13.5MHz signal,\nbut low impedance to mains
TEXT -192 -192 Left 2 ;These components exist inside EDSAC
TEXT 416 536 Left 2 ;In reality the ground points are connected in the distance and may float at slightly different potentials.\nThese resistors provide a naive way of modelling this.
TEXT 1864 -608 Left 2 ;These components exist inside the delay line
TEXT 4240 -392 Left 2 ;Model of FPGA input
TEXT 600 -800 Left 2 ;.tran 0 2 0
TEXT -240 -392 Left 2 ;.ic V(smoothing_cap)=0 V(3v3)=0 V(1V2)=0
RECTANGLE Normal 2736 864 2112 576 2
RECTANGLE Normal 2400 -192 1984 -512 2
RECTANGLE Normal 3184 416 4944 1392 2
RECTANGLE Normal 2496 -272 3344 -16 2
RECTANGLE Normal 2480 -464 4000 112 2
RECTANGLE Normal 5792 1392 4992 416 2
RECTANGLE Normal 1568 16 720 -320 2
RECTANGLE Normal -512 -208 464 304 2
RECTANGLE Normal 1504 1216 384 512 2
RECTANGLE Normal 5824 1440 1712 -672 2
RECTANGLE Normal 4640 -464 4160 128 2
